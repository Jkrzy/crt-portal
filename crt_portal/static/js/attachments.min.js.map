{"version":3,"file":"attachments.min.js","sources":["attachments.js"],"sourcesContent":["(function(root, dom) {\n  var add_attachment_el = document.getElementById('add_attachment');\n  var file_el = document.getElementById('file_input');\n\n  add_attachment_el.onclick = function(event) {\n    event.preventDefault();\n    file_el.click();\n  };\n\n  file_el.onchange = function(event) {\n    var form = document.getElementById('complaint-view-attachments');\n    form.submit();\n\n    var modal = document.getElementById('attachment-uploading--modal');\n    root.CRT.openModal(modal);\n  };\n\n  var remove_buttons = document.querySelectorAll('.remove-attachment-button');\n  remove_buttons.forEach(function(btn) {\n    btn.onclick = function(event) {\n      event.preventDefault();\n\n      var attachment_id = this.getAttribute('data-attachment-id');\n      var attachment_filename = this.getAttribute('data-attachment-filename');\n\n      // modal elements\n      var modal = document.getElementById('attachment-removal-confirmation--modal');\n      var filename_el = document.getElementById('attachment-removal--filename');\n      var no_button = document.getElementById('attachment-removal--no');\n      var yes_button = document.getElementById('attachment-removal--yes');\n\n      // add the to-be-removed filename to the modal\n      filename_el.innerText = attachment_filename;\n\n      // user clicks no on removal confirmation\n      no_button.onclick = function(event) {\n        event.preventDefault();\n        // do nothing, just hide the modal\n        root.CRT.closeModal(modal);\n      };\n\n      // user clicks yes on removal confirmation\n      yes_button.onclick = function(event) {\n        event.preventDefault();\n\n        // get the form for removing this particular attachment\n        var form_id = `complaint-view-remove-attachment-${attachment_id}`;\n        var form = document.getElementById(form_id);\n\n        // submit the removal form\n        form.submit();\n      };\n\n      root.CRT.openModal(modal);\n    };\n  });\n})(window, document);\n"],"names":["root","add_attachment_el","document","getElementById","file_el","onclick","event","preventDefault","click","onchange","submit","modal","CRT","openModal","querySelectorAll","forEach","btn","attachment_id","this","getAttribute","attachment_filename","filename_el","no_button","yes_button","innerText","closeModal","window"],"mappings":"CAAA,SAAUA,GACR,IAAIC,EAAoBC,SAASC,eAAe,kBAC5CC,EAAUF,SAASC,eAAe,cAEtCF,EAAkBI,QAAU,SAASC,GACnCA,EAAMC,iBACNH,EAAQI,SAGVJ,EAAQK,SAAW,SAASH,GACfJ,SAASC,eAAe,8BAC9BO,SAEL,IAAIC,EAAQT,SAASC,eAAe,+BACpCH,EAAKY,IAAIC,UAAUF,IAGAT,SAASY,iBAAiB,6BAChCC,QAAQ,SAASC,GAC9BA,EAAIX,QAAU,SAASC,GACrBA,EAAMC,iBAEN,IAAIU,EAAgBC,KAAKC,aAAa,sBAClCC,EAAsBF,KAAKC,aAAa,4BAGxCR,EAAQT,SAASC,eAAe,0CAChCkB,EAAcnB,SAASC,eAAe,gCACtCmB,EAAYpB,SAASC,eAAe,0BACpCoB,EAAarB,SAASC,eAAe,2BAGzCkB,EAAYG,UAAYJ,EAGxBE,EAAUjB,QAAU,SAASC,GAC3BA,EAAMC,iBAENP,EAAKY,IAAIa,WAAWd,IAItBY,EAAWlB,QAAU,SAASC,GAC5BA,EAAMC,iBAIKL,SAASC,mDAD8Bc,KAI7CP,UAGPV,EAAKY,IAAIC,UAAUF,MArDzB,CAwDGe,OAAQxB"}