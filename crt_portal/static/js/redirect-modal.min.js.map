{"version":3,"file":"redirect-modal.min.js","sources":["redirect-modal.js"],"sourcesContent":["(function(root) {\n  // note that modal.js must be loaded beforehand\n  var modal_el = document.getElementById('external-link--modal');\n  var span = document.getElementById('external-link--address');\n  var links = document.querySelectorAll('.external-link--popup');\n  var continue_button = document.getElementById('external-link--continue');\n  var redirect;\n  for (var i = 0; i < links.length; i++) {\n    var link = links[i];\n    link.onclick = function(event) {\n      var href = event.target.href;\n      event.preventDefault();\n      // display the actual redirect link\n      span.innerHTML = '<a href=\"' + href + '\">' + href + '</a>';\n      root.CRT.openModal(modal_el);\n      // set timeout for redirect\n      clearTimeout(redirect);\n      redirect = setTimeout(function() {\n        // only redirect if modal is still visible\n        if (modal_el.getAttribute('hidden') === null) {\n          window.location.href = href;\n        }\n      }, 20000);\n\n      // set up \"continue\" button to immediately redirect\n      continue_button.onclick = function(event) {\n        event.preventDefault();\n        var href = span.children[0].href;\n        window.location.href = href;\n      };\n    };\n  }\n  var cancel_modal = document.getElementById('external-link--cancel');\n  root.CRT.cancelModal(modal_el, cancel_modal);\n})(window);\n"],"names":["root","redirect","modal_el","document","getElementById","span","links","querySelectorAll","continue_button","i","length","onclick","event","href","target","preventDefault","innerHTML","CRT","openModal","clearTimeout","setTimeout","getAttribute","window","location","children","cancel_modal","cancelModal"],"mappings":"CAAA,SAAUA,GAOR,IALA,IAIIC,EAJAC,EAAWC,SAASC,eAAe,wBACnCC,EAAOF,SAASC,eAAe,0BAC/BE,EAAQH,SAASI,iBAAiB,yBAClCC,EAAkBL,SAASC,eAAe,2BAErCK,EAAI,EAAGA,EAAIH,EAAMI,OAAQD,IACrBH,EAAMG,GACZE,QAAU,SAASC,GACtB,IAAIC,EAAOD,EAAME,OAAOD,KACxBD,EAAMG,iBAENV,EAAKW,UAAY,YAAcH,EAAO,KAAOA,EAAO,OACpDb,EAAKiB,IAAIC,UAAUhB,GAEnBiB,aAAalB,GACbA,EAAWmB,WAAW,WAEoB,OAApClB,EAASmB,aAAa,YACxBC,OAAOC,SAASV,KAAOA,IAExB,KAGHL,EAAgBG,QAAU,SAASC,GACjCA,EAAMG,iBACFF,EAAOR,EAAKmB,SAAS,GAAGX,KAC5BS,OAAOC,SAASV,KAAOA,IAI7B,IAAIY,EAAetB,SAASC,eAAe,yBAC3CJ,EAAKiB,IAAIS,YAAYxB,EAAUuB,GAjCjC,CAkCGH"}